version: '3.8'

services:
  expressjs:
    build:
      context: ./expressjs
      dockerfile: Dockerfile
    ports:
      - "3016:3016"
    environment:
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - PORT=3016
      - NETWORK=${NETWORK:-testnet}
      - BNB_TESTNET_RPC=${BNB_TESTNET_RPC}
      - CONTRACT_ADDRESS=${CONTRACT_ADDRESS}
    volumes:
      - ./expressjs:/app
    depends_on:
      - nextjs

  nextjs:
    build:
      context: ./nextjs
      dockerfile: Dockerfile
    ports:
      - "3015:3015"
    environment:
      - NEXT_PUBLIC_API_URL=http://localhost:3016
      - PORT=3015
    volumes:
      - ./nextjs:/app
      - /app/node_modules
      - /app/.next

