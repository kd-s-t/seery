echo "ğŸ” Running pre-commit checks..."

# Run TypeScript type checking and linting for Next.js
if [ -d "nextjs" ]; then
  echo "ğŸ“¦ Type checking Next.js..."
  cd nextjs
  if [ -f "./node_modules/.bin/tsc" ]; then
    ./node_modules/.bin/tsc --noEmit || {
      echo "âŒ Next.js type checking failed"
      exit 1
    }
  else
    npx tsc --noEmit || {
      echo "âŒ Next.js type checking failed"
      exit 1
    }
  fi
  echo "ğŸ“¦ Linting Next.js..."
  npm run lint -- --fix || {
    echo "âŒ Next.js linting failed"
    exit 1
  }
  cd ..
fi

echo "âœ… Pre-commit checks passed!"
